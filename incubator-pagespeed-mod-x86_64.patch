diff -Naur incubator-pagespeed-mod.orig/install/build_psol.sh incubator-pagespeed-mod/install/build_psol.sh
--- incubator-pagespeed-mod.orig/install/build_psol.sh	2020-05-11 15:37:26.952307402 +0000
+++ incubator-pagespeed-mod/install/build_psol.sh	2020-05-11 16:01:32.357959445 +0000
@@ -19,7 +19,7 @@
 # Builds psol tarball from a mod_pagespeed checkout.
 
 cd $(dirname "$BASH_SOURCE")/..
-source install/build_env.sh || exit 1
+#source install/build_env.sh || exit 1
 
 buildtype=Release
 install_deps=true
@@ -60,7 +60,7 @@
 
 MAKE_ARGS=(V=1 BUILDTYPE=$buildtype)
 
-run_with_log log/gyp.log python build/gyp_chromium --depth=.
+python build/gyp_chromium --depth=.
 
 if $run_tests; then
   run_with_log log/psol_build.log make "${MAKE_ARGS[@]}" \
@@ -70,9 +70,8 @@
 # Using a subshell to contain the cd.
 mps_root=$PWD
 (cd pagespeed/automatic && \
-  run_with_log ../../log/psol_automatic_build.log \
-  make "${MAKE_ARGS[@]}" MOD_PAGESPEED_ROOT=$mps_root \
-  CXXFLAGS="-DSERF_HTTPS_FETCHING=1" all)
+  make -j$(nproc) "${MAKE_ARGS[@]}" MOD_PAGESPEED_ROOT=$mps_root \
+  CXXFLAGS="-DSERF_HTTPS_FETCHING=1" all)
 
 version_h=out/$buildtype/obj/gen/net/instaweb/public/version.h
 if [ ! -f $version_h ]; then
@@ -98,6 +97,8 @@
 
 if [ "$(uname -m)" = x86_64 ]; then
   bit_size_name=x64
+elif [ "$(uname -m)" = aarch64 ]; then
+  bit_size_name=aarch64
 else
   bit_size_name=ia32
 fi

diff -Naur incubator-pagespeed-mod.orig/third_party/grpc/src/src/core/lib/support/log_linux.c incubator-pagespeed-mod/third_party/grpc/src/src/core/lib/support/log_linux.c
--- incubator-pagespeed-mod.orig/third_party/grpc/src/src/core/lib/support/log_linux.c	2020-05-11 15:40:20.850588049 +0000
+++ incubator-pagespeed-mod/third_party/grpc/src/src/core/lib/support/log_linux.c	2020-05-11 16:01:32.357959445 +0000
@@ -39,7 +39,7 @@
 #include <time.h>
 #include <unistd.h>
 
-static long gettid(void) { return syscall(__NR_gettid); }
+static long local_gettid(void) { return syscall(__NR_gettid); }
 
 void gpr_log(const char *file, int line, gpr_log_severity severity,
              const char *format, ...) {
@@ -65,7 +65,7 @@
   gpr_timespec now = gpr_now(GPR_CLOCK_REALTIME);
   struct tm tm;
   static __thread long tid = 0;
-  if (tid == 0) tid = gettid();
+  if (tid == 0) tid = local_gettid();
 
   timer = (time_t)now.tv_sec;
   final_slash = strrchr(args->file, '/');

From 8850eac347db3a3838c004161683510e4cc3aa26 Mon Sep 17 00:00:00 2001
From: Lofesa <lofesa@gmail.com>
Date: Tue, 16 Jul 2019 18:54:40 +0200
Subject: [PATCH 1/2] Signed-off-by: Lofesa <lofesa@gmail.com>

---
 net/instaweb/rewriter/critical_css_loader.js | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/net/instaweb/rewriter/critical_css_loader.js b/net/instaweb/rewriter/critical_css_loader.js
index 0fea1111d7..981a70b8b2 100644
--- a/net/instaweb/rewriter/critical_css_loader.js
+++ b/net/instaweb/rewriter/critical_css_loader.js
@@ -39,11 +39,16 @@ pagespeed.CriticalCssLoader.addAllStyles = function() {
 
   var elements = document.getElementsByClassName('psa_add_styles');
 
+  
   for (var i = 0, e; e = elements[i]; ++i) {
     if (e.nodeName != 'NOSCRIPT') { continue; }
     var div = document.createElement('div');
     div.innerHTML = e.textContent;
-    document.body.appendChild(div);
+    var children = div.childNodes;
+    for (var v = 0; v < children.length; ++v) {
+      children[v].removeAttribute('id');
+    }  
+  document.body.appendChild(div);
   }
 };
 

From a1039e17bd33afa3a9f3b0998b8eb1ff16d5259e Mon Sep 17 00:00:00 2001
From: Lofesa <lofesa@gmail.com>
Date: Fri, 31 Jul 2020 14:00:30 +0200
Subject: [PATCH 2/2] Signed-off-by: Lofesa <lofesa@gmail.com>

---
 net/instaweb/rewriter/critical_css_loader.js | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/instaweb/rewriter/critical_css_loader.js b/net/instaweb/rewriter/critical_css_loader.js
index 981a70b8b2..bdb6fa0862 100644
--- a/net/instaweb/rewriter/critical_css_loader.js
+++ b/net/instaweb/rewriter/critical_css_loader.js
@@ -48,7 +48,7 @@ pagespeed.CriticalCssLoader.addAllStyles = function() {
     for (var v = 0; v < children.length; ++v) {
       children[v].removeAttribute('id');
     }  
-  document.body.appendChild(div);
+    document.body.appendChild(div);
   }
 };
 

From 873bfebc3fc8acd142b322523021849b8b41a45a Mon Sep 17 00:00:00 2001
From: Lofesa <lofesa@gmail.com>
Date: Fri, 7 Feb 2020 21:06:59 +0100
Subject: [PATCH 1/3] Add Firefox UA webp capables and blacklist these taht not

Signed-off-by: Lofesa <lofesa@gmail.com>
---
 pagespeed/kernel/http/user_agent_matcher.cc   | 41 +++++++++++++++++++
 .../kernel/http/user_agent_matcher_test.cc    |  4 ++
 .../http/user_agent_matcher_test_base.cc      |  2 +
 .../http/user_agent_matcher_test_base.h       |  1 +
 4 files changed, 48 insertions(+)

diff --git a/pagespeed/kernel/http/user_agent_matcher.cc b/pagespeed/kernel/http/user_agent_matcher.cc
index 62a6364f23..58439f2d68 100644
--- a/pagespeed/kernel/http/user_agent_matcher.cc
+++ b/pagespeed/kernel/http/user_agent_matcher.cc
@@ -133,6 +133,12 @@ const char* kDeferJSMobileWhitelist[] = {
 //     "Firefox" in the user agent.
 const char* kLegacyWebpWhitelist[] = {
   "*Android *",
+  "*Firefox/66.*",
+  "*Firefox/67.*",
+  "*Firefox/68.*",
+  "*Firefox/69.*",
+  "*Firefox/70.*",
+  "*Firefox/71.*", // These Firefox versions are webp capable but donÂ´t send webp header
 };
 
 // Based on https://github.com/apache/incubator-pagespeed-mod/issues/978,
@@ -150,6 +156,17 @@ const char* kLegacyWebpBlacklist[] = {
   "*Windows Phone*",
   "*Chrome/*",       // Genuine Chrome always sends Accept: webp.
   "*CriOS/*",        // Paranoia: we should not see Android and CriOS together.
+  "*Firefox/?.*",
+  "*Firefox/1?.*",
+  "*Firefox/2?.*",
+  "*Firefox/3?.*",
+  "*Firefox/4?.*",
+  "*Firefox/5?.*",
+  "*Firefox/60.*",
+  "*Firefox/61.*",
+  "*Firefox/62.*",
+  "*Firefox/63.*",
+  "*Firefox/64.*",  // Firefox versions not webp capables
 };
 
 // To determine lossless webp support and animated webp support, we must
@@ -161,6 +178,7 @@ const char* kWebpLosslessAlphaWhitelist[] = {
   // User agent used only for internal testing.
   "webp-la",
   "webp-animated",
+  "*Firefox/*", // Do this way to permit Firefox webcapable to convert png
 };
 
 const char* kWebpLosslessAlphaBlacklist[] = {
@@ -179,6 +197,17 @@ const char* kWebpLosslessAlphaBlacklist[] = {
   "*CriOS/26.*",
   "*CriOS/27.*",
   "*CriOS/28.*",
+  "*Firefox/?.*",
+  "*Firefox/1?.*",
+  "*Firefox/2?.*",
+  "*Firefox/3?.*",
+  "*Firefox/4?.*",
+  "*Firefox/5?.*",
+  "*Firefox/60.*",
+  "*Firefox/61.*",
+  "*Firefox/62.*",
+  "*Firefox/63.*",
+  "*Firefox/64.*", // Black list Firefox not webp capable
 };
 
 // Animated WebP is supported by browsers based on Chromium v32+, including
@@ -190,6 +219,7 @@ const char* kWebpAnimatedWhitelist[] = {
   "*Chrome/??.*",
   "*CriOS/??.*",
   "webp-animated",  // User agent for internal testing.
+  "*Firefox/*",
 };
 
 const char* kWebpAnimatedBlacklist[] = {
@@ -203,6 +233,17 @@ const char* kWebpAnimatedBlacklist[] = {
   "*CriOS/2?.*",
   "*CriOS/30.*",
   "*CriOS/31.*",
+  "*Firefox/?.*",
+  "*Firefox/1?.*",
+  "*Firefox/2?.*",
+  "*Firefox/3?.*",
+  "*Firefox/4?.*",
+  "*Firefox/5?.*",
+  "*Firefox/60.*",
+  "*Firefox/61.*",
+  "*Firefox/62.*",
+  "*Firefox/63.*",
+  "*Firefox/64.*",
 };
 
 const char* kInsertDnsPrefetchWhitelist[] = {
diff --git a/pagespeed/kernel/http/user_agent_matcher_test.cc b/pagespeed/kernel/http/user_agent_matcher_test.cc
index 570a4923aa..4f76baf6f5 100644
--- a/pagespeed/kernel/http/user_agent_matcher_test.cc
+++ b/pagespeed/kernel/http/user_agent_matcher_test.cc
@@ -397,6 +397,8 @@ TEST_F(UserAgentMatcherTest, SupportsWebpLosslessAlpha) {
       kPagespeedInsightsMobileUserAgent));
   EXPECT_TRUE(user_agent_matcher_->SupportsWebpLosslessAlpha(
       kPagespeedInsightsDesktopUserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpLosslessAlpha(
+      kFirefox7UserAgent));
 }
 
 TEST_F(UserAgentMatcherTest, DoesntSupportWebpLosslessAlpha) {
@@ -495,6 +497,8 @@ TEST_F(UserAgentMatcherTest, SupportsAnimatedWebp) {
       kOpera19UserAgent));
   EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
       kChrome37UserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
+      kFirefox7UserAgent));
 }
 
 TEST_F(UserAgentMatcherTest, DoesntSupportAnimatedWebp) {
diff --git a/pagespeed/kernel/http/user_agent_matcher_test_base.cc b/pagespeed/kernel/http/user_agent_matcher_test_base.cc
index bdba09c793..1c975f9375 100644
--- a/pagespeed/kernel/http/user_agent_matcher_test_base.cc
+++ b/pagespeed/kernel/http/user_agent_matcher_test_base.cc
@@ -128,6 +128,8 @@ const char UserAgentMatcherTestBase::kFirefox42AndroidUserAgent[] =
     "Mozilla/5.0 (Android 5.0.1; Mobile; rv:42.0) Gecko/42.0 Firefox/42.0";
 const char UserAgentMatcherTestBase::kFirefox5UserAgent[] =
     "Mozilla/5.0 (X11; U; Linux i586; de; rv:5.0) Gecko/20100101 Firefox/5.0";
+const char UserAgentMatcherTestBase::kFirefox7UserAgent[] =
+    "Mozilla/5.0 (X11; Linux i586; rv:31.0) Gecko/20100101 Firefox/72.0"; //webp capable
 const char UserAgentMatcherTestBase::kFirefoxMobileUserAgent[] =
     "Mozilla/5.0 (Android; Mobile; rv:38.0) Gecko/38.0 Firefox/38.0";
 const char UserAgentMatcherTestBase::kFirefoxNokiaN800[] =
diff --git a/pagespeed/kernel/http/user_agent_matcher_test_base.h b/pagespeed/kernel/http/user_agent_matcher_test_base.h
index f1b146326b..0ca66d0db9 100644
--- a/pagespeed/kernel/http/user_agent_matcher_test_base.h
+++ b/pagespeed/kernel/http/user_agent_matcher_test_base.h
@@ -67,6 +67,7 @@ class UserAgentMatcherTestBase : public testing::Test {
   static const char kFirefox3UserAgent[];
   static const char kFirefox42AndroidUserAgent[];
   static const char kFirefox5UserAgent[];
+  static const char kFirefox7UserAgent[];
   static const char kFirefoxMobileUserAgent[];
   static const char kFirefoxNokiaN800[];
   static const char kFirefoxUserAgent[];

From d6b055e3e490bd66c4ccd32a339b4b5549e743a5 Mon Sep 17 00:00:00 2001
From: Otto van der Schaaf <oschaaf@we-amp.com>
Date: Mon, 27 Jul 2020 23:50:21 +0200
Subject: [PATCH 2/3] Reformat to new specs

Signed-off-by: Otto van der Schaaf <oschaaf@we-amp.com>
---
 pagespeed/kernel/http/user_agent_matcher.cc   | 119 +++++-------------
 .../kernel/http/user_agent_matcher_test.cc    |  24 ++--
 .../http/user_agent_matcher_test_base.cc      |   6 +-
 3 files changed, 46 insertions(+), 103 deletions(-)

diff --git a/pagespeed/kernel/http/user_agent_matcher.cc b/pagespeed/kernel/http/user_agent_matcher.cc
index c99df45136..d98fc6c6bd 100644
--- a/pagespeed/kernel/http/user_agent_matcher.cc
+++ b/pagespeed/kernel/http/user_agent_matcher.cc
@@ -112,13 +112,9 @@ const char* kDeferJSMobileWhitelist[] = {
 //  2. Recent Opera support WebP, and some Opera have both "Opera" and
 //     "Firefox" in the user agent.
 const char* kLegacyWebpWhitelist[] = {
-  "*Android *",
-  "*Firefox/66.*",
-  "*Firefox/67.*",
-  "*Firefox/68.*",
-  "*Firefox/69.*",
-  "*Firefox/70.*",
-  "*Firefox/71.*", // These Firefox versions are webp capable but donÂ´t send webp header
+    "*Android *",    "*Firefox/66.*", "*Firefox/67.*",
+    "*Firefox/68.*", "*Firefox/69.*", "*Firefox/70.*",
+    "*Firefox/71.*",  // These Firefox versions are webp capable but donÂ´t send webp header
 };
 
 // Based on https://github.com/apache/incubator-pagespeed-mod/issues/978,
@@ -126,68 +122,34 @@ const char* kLegacyWebpWhitelist[] = {
 // https://groups.google.com/forum/?utm_medium=email&utm_source=footer#!msg/mod-pagespeed-discuss/HYzzdOzJu_k/ftdV8koVgUEJ
 // a browser called Midori might (at some point) masquerade as Chrome as well.
 const char* kLegacyWebpBlacklist[] = {
-  "*Android 0.*",
-  "*Android 1.*",
-  "*Android 2.*",
-  "*Android 3.*",
-  "*Firefox/*",
-  "*Edge/*",
-  "*Trident/*",
-  "*Windows Phone*",
-  "*Chrome/*",       // Genuine Chrome always sends Accept: webp.
-  "*CriOS/*",        // Paranoia: we should not see Android and CriOS together.
-  "*Firefox/?.*",
-  "*Firefox/1?.*",
-  "*Firefox/2?.*",
-  "*Firefox/3?.*",
-  "*Firefox/4?.*",
-  "*Firefox/5?.*",
-  "*Firefox/60.*",
-  "*Firefox/61.*",
-  "*Firefox/62.*",
-  "*Firefox/63.*",
-  "*Firefox/64.*",  // Firefox versions not webp capables
+    "*Android 0.*",  "*Android 1.*",  "*Android 2.*",  "*Android 3.*",
+    "*Firefox/*",    "*Edge/*",       "*Trident/*",    "*Windows Phone*",
+    "*Chrome/*",  // Genuine Chrome always sends Accept: webp.
+    "*CriOS/*",   // Paranoia: we should not see Android and CriOS together.
+    "*Firefox/?.*",  "*Firefox/1?.*", "*Firefox/2?.*", "*Firefox/3?.*",
+    "*Firefox/4?.*", "*Firefox/5?.*", "*Firefox/60.*", "*Firefox/61.*",
+    "*Firefox/62.*", "*Firefox/63.*",
+    "*Firefox/64.*",  // Firefox versions not webp capables
 };
 
 // To determine lossless webp support and animated webp support, we must
 // examine the UA.
 const char* kWebpLosslessAlphaWhitelist[] = {
-  "*Chrome/??.*",
-  "*Chrome/???.*",
-  "*CriOS/??.*",
-  // User agent used only for internal testing.
-  "webp-la",
-  "webp-animated",
-  "*Firefox/*", // Do this way to permit Firefox webcapable to convert png
+    "*Chrome/??.*", "*Chrome/???.*", "*CriOS/??.*",
+    // User agent used only for internal testing.
+    "webp-la", "webp-animated",
+    "*Firefox/*",  // Do this way to permit Firefox webcapable to convert png
 };
 
 const char* kWebpLosslessAlphaBlacklist[] = {
-  "*Chrome/?.*",
-  "*Chrome/1?.*",
-  "*Chrome/20.*",
-  "*Chrome/21.*",
-  "*Chrome/22.*",
-  "*CriOS/1?.*",
-  "*CriOS/20.*",
-  "*CriOS/21.*",
-  "*CriOS/22.*",
-  "*CriOS/23.*",
-  "*CriOS/24.*",
-  "*CriOS/25.*",
-  "*CriOS/26.*",
-  "*CriOS/27.*",
-  "*CriOS/28.*",
-  "*Firefox/?.*",
-  "*Firefox/1?.*",
-  "*Firefox/2?.*",
-  "*Firefox/3?.*",
-  "*Firefox/4?.*",
-  "*Firefox/5?.*",
-  "*Firefox/60.*",
-  "*Firefox/61.*",
-  "*Firefox/62.*",
-  "*Firefox/63.*",
-  "*Firefox/64.*", // Black list Firefox not webp capable
+    "*Chrome/?.*",   "*Chrome/1?.*",  "*Chrome/20.*",  "*Chrome/21.*",
+    "*Chrome/22.*",  "*CriOS/1?.*",   "*CriOS/20.*",   "*CriOS/21.*",
+    "*CriOS/22.*",   "*CriOS/23.*",   "*CriOS/24.*",   "*CriOS/25.*",
+    "*CriOS/26.*",   "*CriOS/27.*",   "*CriOS/28.*",   "*Firefox/?.*",
+    "*Firefox/1?.*", "*Firefox/2?.*", "*Firefox/3?.*", "*Firefox/4?.*",
+    "*Firefox/5?.*", "*Firefox/60.*", "*Firefox/61.*", "*Firefox/62.*",
+    "*Firefox/63.*",
+    "*Firefox/64.*",  // Black list Firefox not webp capable
 };
 
 // Animated WebP is supported by browsers based on Chromium v32+, including
@@ -196,34 +158,19 @@ const char* kWebpLosslessAlphaBlacklist[] = {
 // also cover Opera 19+.
 // [1] https://dev.opera.com/blog/opera-user-agent-strings-opera-15-and-beyond/
 const char* kWebpAnimatedWhitelist[] = {
-  "*Chrome/??.*",
-  "*CriOS/??.*",
-  "webp-animated",  // User agent for internal testing.
-  "*Firefox/*",
+    "*Chrome/??.*",
+    "*CriOS/??.*",
+    "webp-animated",  // User agent for internal testing.
+    "*Firefox/*",
 };
 
 const char* kWebpAnimatedBlacklist[] = {
-  "*Chrome/?.*",
-  "*Chrome/1?.*",
-  "*Chrome/2?.*",
-  "*Chrome/30.*",
-  "*Chrome/31.*",
-  "*CriOS/?.*",
-  "*CriOS/1?.*",
-  "*CriOS/2?.*",
-  "*CriOS/30.*",
-  "*CriOS/31.*",
-  "*Firefox/?.*",
-  "*Firefox/1?.*",
-  "*Firefox/2?.*",
-  "*Firefox/3?.*",
-  "*Firefox/4?.*",
-  "*Firefox/5?.*",
-  "*Firefox/60.*",
-  "*Firefox/61.*",
-  "*Firefox/62.*",
-  "*Firefox/63.*",
-  "*Firefox/64.*",
+    "*Chrome/?.*",   "*Chrome/1?.*",  "*Chrome/2?.*",  "*Chrome/30.*",
+    "*Chrome/31.*",  "*CriOS/?.*",    "*CriOS/1?.*",   "*CriOS/2?.*",
+    "*CriOS/30.*",   "*CriOS/31.*",   "*Firefox/?.*",  "*Firefox/1?.*",
+    "*Firefox/2?.*", "*Firefox/3?.*", "*Firefox/4?.*", "*Firefox/5?.*",
+    "*Firefox/60.*", "*Firefox/61.*", "*Firefox/62.*", "*Firefox/63.*",
+    "*Firefox/64.*",
 };
 
 const char* kInsertDnsPrefetchWhitelist[] = {
diff --git a/pagespeed/kernel/http/user_agent_matcher_test.cc b/pagespeed/kernel/http/user_agent_matcher_test.cc
index 6a2c23cbf2..c9a72dda72 100644
--- a/pagespeed/kernel/http/user_agent_matcher_test.cc
+++ b/pagespeed/kernel/http/user_agent_matcher_test.cc
@@ -317,8 +317,8 @@ TEST_F(UserAgentMatcherTest, SupportsWebpLosslessAlpha) {
       kPagespeedInsightsMobileUserAgent));
   EXPECT_TRUE(user_agent_matcher_->SupportsWebpLosslessAlpha(
       kPagespeedInsightsDesktopUserAgent));
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpLosslessAlpha(
-      kFirefox7UserAgent));
+  EXPECT_TRUE(
+      user_agent_matcher_->SupportsWebpLosslessAlpha(kFirefox7UserAgent));
 }
 
 TEST_F(UserAgentMatcherTest, DoesntSupportWebpLosslessAlpha) {
@@ -395,19 +395,13 @@ TEST_F(UserAgentMatcherTest, IE11NoDeferJs) {
 TEST_F(UserAgentMatcherTest, Mobilization) { VerifyMobilizationSupport(); }
 
 TEST_F(UserAgentMatcherTest, SupportsAnimatedWebp) {
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
-      kTestingWebpAnimated));
-
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
-      kChrome32UserAgent));
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
-      kCriOS32UserAgent));
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
-      kOpera19UserAgent));
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
-      kChrome37UserAgent));
-  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(
-      kFirefox7UserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(kTestingWebpAnimated));
+
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(kChrome32UserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(kCriOS32UserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(kOpera19UserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(kChrome37UserAgent));
+  EXPECT_TRUE(user_agent_matcher_->SupportsWebpAnimated(kFirefox7UserAgent));
 }
 
 TEST_F(UserAgentMatcherTest, DoesntSupportAnimatedWebp) {
diff --git a/pagespeed/kernel/http/user_agent_matcher_test_base.cc b/pagespeed/kernel/http/user_agent_matcher_test_base.cc
index 7a604358cd..8b7949705f 100644
--- a/pagespeed/kernel/http/user_agent_matcher_test_base.cc
+++ b/pagespeed/kernel/http/user_agent_matcher_test_base.cc
@@ -128,8 +128,10 @@ const char UserAgentMatcherTestBase::kFirefox42AndroidUserAgent[] =
     "Mozilla/5.0 (Android 5.0.1; Mobile; rv:42.0) Gecko/42.0 Firefox/42.0";
 const char UserAgentMatcherTestBase::kFirefox5UserAgent[] =
     "Mozilla/5.0 (X11; U; Linux i586; de; rv:5.0) Gecko/20100101 Firefox/5.0";
-const char UserAgentMatcherTestBase::kFirefox7UserAgent[] =
-    "Mozilla/5.0 (X11; Linux i586; rv:31.0) Gecko/20100101 Firefox/72.0"; //webp capable
+const char
+    UserAgentMatcherTestBase::kFirefox7UserAgent
+        [] = "Mozilla/5.0 (X11; Linux i586; rv:31.0) Gecko/20100101 "
+             "Firefox/72.0";  //webp capable
 const char UserAgentMatcherTestBase::kFirefoxMobileUserAgent[] =
     "Mozilla/5.0 (Android; Mobile; rv:38.0) Gecko/38.0 Firefox/38.0";
 const char UserAgentMatcherTestBase::kFirefoxNokiaN800[] =

diff --git a/net/instaweb/genfiles/conf/pagespeed_libraries.conf b/net/instaweb/genfiles/conf/pagespeed_libraries.conf
--- a/net/instaweb/genfiles/conf/pagespeed_libraries.conf
+++ b/net/instaweb/genfiles/conf/pagespeed_libraries.conf
@@ -1234,6 +1234,14 @@
     ModPagespeedLibrary 88059 tJmcu2pzqbMS9jXP915aU //ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js
     # jquery/3.4.1/jquery.js:
     ModPagespeedLibrary 141767 YMjN_PDe4cETVTWLoSfvI //ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js
+    # jquery/3.5.1/jquery.min.js
+    ModPagespeedLibrary 89390 A8biqtTJrtWLYHojdWr-v //ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js
+    # jquery/3.5.1/jquery.js
+    ModPagespeedLibrary 143466 O426e3rTpm6_x4uifvdZK //ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.js
+    # jquery/3.7.1/jquery.min.js
+    ModPagespeedLibrary 110374 v2CJ7UaYy4JwqLDIrZUI //cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js
+    # jquery/3.7.1/jquery.js
+    ModPagespeedLibrary 183456 k1pnlgt4F1H8L7t3z95 //cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js
     # jquerymobile/1.4.0/jquery.mobile.min.js:
     ModPagespeedLibrary 193066 pkv8dHWLVaOlDGcgh0PYe //ajax.googleapis.com/ajax/libs/jquerymobile/1.4.0/jquery.mobile.min.js
     # jquerymobile/1.4.0/jquery.mobile.js:
